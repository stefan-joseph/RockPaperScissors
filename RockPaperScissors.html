<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors!</title>
</head>
<body>
    <div id='selection'>
        <button id='rock'>Rock</button>
        <button id='paper'>Paper</button>
        <button id='scissors'>Scissors</button>
    </div>
    <div id='results'>

    </div>
    <div id='score'>

    </div>
    <script>
        let playerScore = 0
        let computerScore = 0
        
        const score = document.querySelector('#score');

        const scoreboard = document.createElement('h2');
        scoreboard.textContent = `Your score: ${playerScore} Computer score: ${computerScore}`

        score.appendChild(scoreboard);        

        const results = document.querySelector('#results');
        results.textContent = 'Best 3 out of 5 wins! Choose your weapon to start the game!';
        
        const selectRock = document.querySelector('#rock');
        const selectPaper = document.querySelector('#paper');
        const selectScissors = document.querySelector('#scissors');

        selectRock.addEventListener('click', playRock);
        selectPaper.addEventListener('click', playPaper);
        selectScissors.addEventListener('click', playScissors);
        
        function playRock () {
            playRound(selectRock.id, computerPlay());
        }
        
        function playPaper () {
            playRound(selectPaper.id, computerPlay());
        }

        function playScissors () {
            playRound(selectScissors.id, computerPlay());
        }



        function computerPlay () {
            computerChoice = Math.floor(Math.random() * 3);
            if (computerChoice === 0){
                return 'Rock';
            } else if (computerChoice === 1){
                return 'Paper';
            } else {
                return 'Scissors';
            }
        };

        function playRound (playerSelection, computerSelection) {
            if (playerScore >= 3) {
                alert('You win! Refresh to start again');
            } else if (computerScore >= 3) {
                alert('You lose! Refresh to start again');
            } else {
                playerCorrectForm = playerSelection.toUpperCase();
                if (playerCorrectForm === 'ROCK'){
                    if (computerSelection === 'Paper'){
                        results.textContent = 'You lose! Paper beats Rock';
                        computerScore += 1;
                        scoreboard.textContent = `Your score: ${playerScore} Computer score: ${computerScore}`
                        return 2;
                    } else if (computerSelection === 'Scissors'){
                        results.textContent = 'You win! Rock beats Paper';
                        playerScore += 1;
                        scoreboard.textContent = `Your score: ${playerScore} Computer score: ${computerScore}`
                        return 1;
                    } else{
                        results.textContent = "It's a tie!";
                        return 3;
                    }
                } else if (playerCorrectForm === 'PAPER'){
                    if (computerSelection === 'Scissors'){
                        results.textContent = 'You lose! Scissor beats Paper';
                        computerScore += 1;
                        scoreboard.textContent = `Your score: ${playerScore} Computer score: ${computerScore}`
                        return 2;
                    }else if (computerSelection === 'Rock'){
                        results.textContent = 'You win! Paper beats Rock';
                        playerScore += 1;
                        scoreboard.textContent = `Your score: ${playerScore} Computer score: ${computerScore}`
                        return 1
                    }else{
                        results.textContent = "It's a tie!";
                        return 3
                    }
                }else if (playerCorrectForm === 'SCISSORS'){
                    if (computerSelection === 'Rock'){
                        results.textContent = 'You lose! Rock beats Scissors';
                        computerScore += 1;
                        scoreboard.textContent = `Your score: ${playerScore} Computer score: ${computerScore}`
                        return 2;
                    }else if (computerSelection === 'Paper'){
                        results.textContent = 'You win! Scissors beats Paper';
                        playerScore += 1;
                        scoreboard.textContent = `Your score: ${playerScore} Computer score: ${computerScore}`
                        return 1;
                    }else{
                        results.textContent = "It's a tie!";
                        return 3
                    }
                };
            }
        }

        /*function game () {
            //let playerScore = 0
            //let computerScore = 0
            for (i = 0; i < 200; ++i) {
                if (playerScore >= 3){
                    console.log('You win the game!');
                    break;
                } else if (computerScore >= 3){
                    console.log('The computer wins the game!');
                    break;
                } else {
                    let x = prompt('Rock, Paper, Scissors?');
                    let y = computerPlay();
                    let winner = playRound(x, y);
                
                    if (winner === 1){
                        playerScore += 1
                        console.log(playerScore);
                    } else if (winner === 2){
                        computerScore += 1
                        console.log(computerScore);
                    }; 
                }
            }
        }
        
            
            
            
            
            
            
            
            
            
            
            
            
            
            /*playerScore = 0;
            computerScore = 0;
            // Loop throught this until winner
            if (playerScore >= 3){
                return 'You win the game!'
            }else if (computerScore >= 3){
                return 'You lose the game!'
            }else{
                let playerSelection = prompt('Rock, Paper, Scissors?');
                let computerSelection = computerPlay();
                function resultOfRound () {
                    playRound(playerSelection, computerSelection);
                    if (winner === 1){
                        playerScore += 1;
                    }else if (winner === 2){
                        computerScore += 1;
                    }else{

                    }
                } 

            }
        }*/
    </script>
</body>
</html>